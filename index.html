<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Fitness Tracker</title>
    
    <!-- PWA Manifest for Android installation -->
    <link rel="manifest" href="/manifest.json">
    
    <!-- App Icons -->
    <link rel="icon" type="image/png" href="/logo.png">
    <link rel="apple-touch-icon" href="/logo.png">
    
    <!-- Theme color for mobile browsers -->
    <meta name="theme-color" content="#00b4d8">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="description" content="Track your fitness journey with exercise recording, progress charts, and multilingual support">
    
    <!-- Chart.js library for creating charts and graphs -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- Link to our custom CSS file -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Main container for the entire app -->
    <div id="app">
        
        <!-- HOME SCREEN -->
        <!-- This is the main landing page with buttons to access different features -->
        <div id="homeScreen" class="screen active">
            <div class="header">
                <div class="app-logo-container">
                    <img src="/logo.png" alt="Fitness Tracker Logo" class="app-logo">
                </div>
                <h1 data-lang="appTitle">Fitness Tracker</h1>
                <p class="subtitle" data-lang="appSubtitle">Track Your Journey to Health</p>
            </div>
            
            <div class="menu-cards">
                <!-- Each card navigates to a different screen when clicked -->
                <div class="menu-card" onclick="showScreen('recordScreen')">
                    <div class="card-icon">üí™</div>
                    <h2 data-lang="recordExercise">Record Exercise</h2>
                    <p data-lang="recordExerciseDesc">Log your workout</p>
                </div>
                
                <div class="menu-card" onclick="showScreen('historyScreen')">
                    <div class="card-icon">üìä</div>
                    <h2 data-lang="viewRecords">View Records</h2>
                    <p data-lang="viewRecordsDesc">Check your progress</p>
                </div>
                
                <div class="menu-card" onclick="showScreen('exportScreen')">
                    <div class="card-icon">üì•</div>
                    <h2 data-lang="exportData">Export Data</h2>
                    <p data-lang="exportDataDesc">Download your data</p>
                </div>
                
                <div class="menu-card" onclick="showScreen('settingsScreen')">
                    <div class="card-icon">‚öôÔ∏è</div>
                    <h2 data-lang="settings">Settings</h2>
                    <p data-lang="settingsDesc">Customize your app</p>
                </div>
            </div>
        </div>

        <!-- RECORD EXERCISE SCREEN -->
        <!-- This screen allows users to log their workouts -->
        <div id="recordScreen" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê <span data-lang="back">Back</span></button>
                <h1 data-lang="recordExercise">Record Exercise</h1>
            </div>
            
            <div class="content">
                <!-- Step 1: Select exercise category -->
                <div id="categorySelection" class="step active">
                    <h2 data-lang="selectCategory">Select Category</h2>
                    <div id="categoryCards" class="category-grid">
                        <!-- Categories will be generated by JavaScript -->
                    </div>
                </div>
                
                <!-- Step 2: Select specific exercise -->
                <div id="exerciseSelection" class="step">
                    <button class="back-btn" onclick="backToCategories()">‚Üê <span data-lang="back">Back</span></button>
                    <h2 data-lang="selectExercise">Select Exercise</h2>
                    <div id="exerciseList" class="exercise-list">
                        <!-- Exercises will be generated by JavaScript -->
                    </div>
                </div>
                
                <!-- Step 3: Fill in exercise details -->
                <div id="exerciseForm" class="step">
                    <button class="back-btn" onclick="backToExercises()">‚Üê <span data-lang="back">Back</span></button>
                    <h2 id="exerciseFormTitle"></h2>
                    
                    <form id="workoutForm" onsubmit="saveWorkout(event)">
                        <!-- Form fields will be dynamically generated based on the selected exercise -->
                        <div id="dynamicFormFields"></div>
                        
                        <!-- Optional notes field (available for all exercises) -->
                        <div class="form-group">
                            <label data-lang="notes">Notes (Optional)</label>
                            <textarea id="notes" rows="3" placeholder=""></textarea>
                        </div>
                        
                        <div class="form-actions">
                            <button type="submit" class="btn-primary" data-lang="saveWorkout">Save Workout</button>
                            <button type="button" class="btn-secondary" onclick="resetForm()" data-lang="reset">Reset</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>

        <!-- HISTORY/STATS SCREEN -->
        <!-- This screen displays workout history, charts, and statistics -->
        <div id="historyScreen" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê <span data-lang="back">Back</span></button>
                <h1 data-lang="viewRecords">View Records</h1>
            </div>
            
            <div class="content">
                <!-- Summary statistics -->
                <div class="stats-summary">
                    <div class="stat-card">
                        <div class="stat-value" id="totalWorkouts">0</div>
                        <div class="stat-label" data-lang="totalWorkouts">Total Workouts</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="thisMonth">0</div>
                        <div class="stat-label" data-lang="thisMonth">This Month</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="mostFrequent">-</div>
                        <div class="stat-label" data-lang="mostFrequent">Most Frequent</div>
                    </div>
                </div>
                
                <!-- Charts section -->
                <div class="charts-section">
                    <div class="chart-container">
                        <h3 data-lang="categoryDistribution">Category Distribution</h3>
                        <canvas id="categoryChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3 data-lang="weeklyActivity">Weekly Activity</h3>
                        <canvas id="weeklyChart"></canvas>
                    </div>
                </div>
                
                <!-- Workout history list -->
                <div class="history-section">
                    <h3 data-lang="workoutHistory">Workout History</h3>
                    <div id="historyList">
                        <!-- History items will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- EXPORT DATA SCREEN -->
        <!-- This screen allows users to download their workout data as CSV -->
        <div id="exportScreen" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê <span data-lang="back">Back</span></button>
                <h1 data-lang="exportData">Export Data</h1>
            </div>
            
            <div class="content">
                <div class="export-info">
                    <p data-lang="exportInfo">Download your workout data as a CSV file that can be opened in Excel or Google Sheets.</p>
                </div>
                
                <div class="export-preview">
                    <h3 data-lang="dataPreview">Data Preview</h3>
                    <div id="exportPreview">
                        <!-- Preview will be generated by JavaScript -->
                    </div>
                </div>
                
                <button class="btn-primary btn-large" onclick="downloadCSV()" data-lang="downloadCSV">Download CSV File</button>
            </div>
        </div>

        <!-- SETTINGS SCREEN -->
        <!-- This screen allows users to customize the app -->
        <div id="settingsScreen" class="screen">
            <div class="header">
                <button class="back-btn" onclick="showScreen('homeScreen')">‚Üê <span data-lang="back">Back</span></button>
                <h1 data-lang="settings">Settings</h1>
            </div>
            
            <div class="content">
                <!-- Language selection -->
                <div class="settings-group">
                    <h3 data-lang="language">Language</h3>
                    <select id="languageSelect" onchange="changeLanguage(this.value)">
                        <option value="en">English</option>
                        <option value="zh">‰∏≠Êñá (Chinese)</option>
                        <option value="es">Espa√±ol (Spanish)</option>
                        <option value="ms">Bahasa Melayu (Malay)</option>
                    </select>
                </div>
                
                <!-- Theme selection -->
                <div class="settings-group">
                    <h3 data-lang="theme">Theme</h3>
                    <select id="themeSelect" onchange="changeTheme(this.value)">
                        <option value="system" data-lang="themeSystem">System Default</option>
                        <option value="light" data-lang="themeLight">Light Mode</option>
                        <option value="dark" data-lang="themeDark">Dark Mode</option>
                    </select>
                </div>
                
                <!-- Background image upload -->
                <div class="settings-group">
                    <h3 data-lang="backgroundImage">Background Image</h3>
                    <input type="file" id="bgImageInput" accept="image/*" onchange="uploadBackground(event)">
                    <button class="btn-secondary" onclick="removeBackground()" data-lang="removeBackground">Remove Background</button>
                </div>
                
                <!-- Data management -->
                <div class="settings-group danger-zone">
                    <h3 data-lang="dataManagement">Data Management</h3>
                    <button class="btn-danger" onclick="clearAllData()" data-lang="clearAllData">Clear All Data</button>
                    <p class="warning-text" data-lang="clearDataWarning">‚ö†Ô∏è This will delete all your workout records permanently!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Link to our JavaScript file (loaded at the end so HTML loads first) -->
    <script src="app.js"></script>
    
    <!-- Register Service Worker for PWA functionality -->
    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('/service-worker.js')
                    .then(reg => console.log('Service Worker registered'))
                    .catch(err => console.log('Service Worker registration failed'));
            });
        }
    </script>
</body>
</html>
